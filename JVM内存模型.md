Java虚拟机定义了若干种程序运行期间会使用到的运行时数据区，其中有一些会随着虚拟机启动而创建，随着虚拟机退出而销毁。另外一些则是与线程一一对应的，这些与线程对应的数据区域会随着线程开始和结束而创建和销毁。
## PC寄存器
  JVM可以支持多线程同时执行，每一条JVM线程都有自己的pc(program counter)寄存器。在任意时刻，一条JVM虚拟机只会执行一个方法的代码，这个正在被线程执行的方法称为该线程的`当前方法(current method)`。如果这个方法不是native的，pc寄存器就保存JVM正在执行的字节码指令的地址，如果该方法是native的，pc寄存器的值就是undefined。pc寄存器的容量至少应当能保存一个returnAddress类型的数据或者一个与平台相关的本地指针的值。
## Java虚拟机栈
  每一个JVM线程都有自己私有的Java虚拟机栈，这个栈与线程同时创建，用于存储`栈帧(Frame)`。  
  Java虚拟机栈可以是固定大小，也可以根据计算动态来扩展和收缩。  
### 栈帧
  栈帧是用来存储数据和部分过程结果的数据结构，同时也用来处理动态链接、方法返回值和异常分派。  
  栈帧对着方法调用而创建，随着方法结束而销毁。
  栈帧的存储空间由创建它的线程分配在Java虚拟机栈中，每一个栈帧都有自己的`本地变量表(局部变量表)`、`操作数栈`和指向当前方法所属的类的运行时常量池的引用。
  栈帧是线程本地私有的数据，不可能在一个栈帧之中引用另外一个线程的栈帧。
- 局部变量表
  每个栈帧内部都包含一组称为局部变量表的变量列表。栈帧中局部变量表的长度由编译期决定，并且存储于类或接口的二进制表示之中  
  一个局部变量可以保存一个类型为`boolean`、`byte`、`char`、`short`、`int`、`float`、`reference`或`returnAddress`的数据;两个局部变量可以保存一个类型为`long`或`double`的数据。  
  局部变量使用索引来进行定位访问。首个局部变量的索引值为0。
  Java虚拟机使用局部变量表来完成方法调用时的`参数传递`。当调用类方法时，它的参数将会依次传递到局部变量表中(索引)从0开始的连续位置上。当调用实例方法时，第0个局部变量一定用来存储该实例方法所在对象的引用(Java中的this关键字<soga>)。后续的其他参数传递则会从1开始。  

- 操作数栈
  每个栈帧内部都包含一个称为操作数栈的LIFO栈。栈帧中操作数栈的最大深度有编译期决定。  
  栈帧在刚刚创建时，操作数栈是空的。Java虚拟机提供一些字节码指令来从局部变量表或者对象实例的字段中复制常量或变量值到操作数栈中，也提供了一些指令用于从操作数栈取走数据、操作数据以及把操作结果重新入栈。在调用方法时，操作数栈也用来准备调用方法的参数以及接收方法返回结果。  
  在任意时期，操作数栈都会有一个确定的栈深度，一个long或double类型的数据会占用两个单位的栈深度，其他类型则会占用一个单位的栈深度。  

- 动态链接
  每个栈帧内部都包含一个指向当前方法所在类型的`运行时常量池`的引用，以便对当前方法的代码实现动态链接。在class文件中，一个方法若要调用其他方法，或者访问成员变量，则需要通过符号引用来表示(Linux(?_?)), 动态链接的作用就是将这些以符号引用所表示的方法转换为对实际方法的直接引用。
## Java堆
  在JVM中，堆是可供各个线程共享的运行时内存区域，也是供所有类实例和数组对象分配内存的区域。  
  Java堆在虚拟机启动的时候就被创建，它存储了GC所管理的各种对象，这些被管理对象无需也无法显示地销毁。  
  Java堆的容量可以是固定的，也可以随着程序执行的需求动态扩展，并在不需要过多空间是自动收缩。  
## 方法区
  在JVM中，方法区是可供各个线程共享的运行时内存区域。它存储了每一个类的结构信息，例如，运行时常量池、字段和方法数据、构造函数和普通方法的字节码内容，还包括一些在类、实例、接口初始化时用到的特殊方法。  
  方法区在虚拟机启动时创建，方法区是堆的逻辑组成部分。  
  方法区的容量可以是固定的，也可以随着程序执行的需求动态扩展，并在不需要过多空间是自动收缩。
## 运行时常量池
  运行时常量池是class文件中每一个类或接口的常量池表的运行时表现形式，它包括了若干种不同的常量，从编译期可知的数值字面量到必须在运行期解析后才能获得的方法或字段引用。  
  每一个运行时常量池在JVM的方法区中分配，在加载类和接口到虚拟机后，就创建对应的运行时常量池。
## 本地方法栈
  本地方法栈：支持native方法(使用Java以外的语言编写的方法)执行的栈  
  一般在线程创建的时候按线程分配。
